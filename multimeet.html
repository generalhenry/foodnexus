<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
	<style type="text/css">
		html { height: 100% }
		body { height: 100%; margin: 0; padding: 0 }
		#map_canvas { height: 100% }
	</style>
	<script type="text/javascript"
			src="http://maps.googleapis.com/maps/api/js?sensor=true">
	</script>
    <script type="text/javascript"
            src="MultiMeet.js">
    </script>

	<script type="text/javascript">
        var geocoder;
        var map;
        var latLongArray = new Array();
        var willingnessArray = new Array();
        function initialize() {
            geocoder = new google.maps.Geocoder();
			var myOptions = {
				center: new google.maps.LatLng(-34.397, 150.644),
				zoom: 8,
				mapTypeId: google.maps.MapTypeId.ROADMAP
			};
			map = new google.maps.Map(document.getElementById("map_canvas"),
					myOptions);
		}
        function addToArray() {
            var address = document.getElementById("addressInput").value;
            var willingness = parseFloat(document.getElementById("willingnessInput").value);
            geocoder.geocode( { 'address': address}, function(results, status) {
                if (status == google.maps.GeocoderStatus.OK) {
                    var latLng = results[0].geometry.location;
                    map.setCenter(latLng);
                    var marker = new google.maps.Marker({
                        map: map,
                        position: latLng
                    });
                    latLongArray.push(latLng);
                    willingnessArray.push(willingness);
                } else {
                    alert("Geocode was not successful for the following reason: " + status);
                }
            });
            document.getElementById("addressInput").value = "";
            document.getElementById("willingnessInput").value = "";
        }
        function centerMap() {
            alert(latLongArray);
            var googleLatLng = midPoint(latLongArray, willingnessArray);
            map.setCenter(googleLatLng);
            var marker = new google.maps.Marker({
                map: map,
                position: googleLatLng
            });
        }
    </script>
</head>
<body onload="initialize()">
<div id="map_canvas" style="width:30%; height:30%"></div>
<form>
	address: <input type="text" id="addressInput" /></br>
    willingness: <input type="text" id="willingnessInput"  /></br>
    <input type="button" value="Click" name="add" onClick="addToArray()"/>
</form>
<form>
    <input type="button" value="Click" name="mid" onClick="centerMap()"/>
</form>
</body>
</html>